:css
  div.controls select {
    width: 98%;
  }
= simple_form_for @problem_solution, :url => execute_solution_path(@problem_solution), :html => { :class => 'form-horizontal form' } do |f|
  .form-header
    %h3= "Выполнить решение проблемы \""+@problem_solution.problem.name+"\" "+(@server ? "на сервере \""+@server.name+"\"" : "")
  .form-inputs
    = f.hidden_field :id
    - if !@server
      = f.input :server_id, :label => "Сервер" do
        = f.select :server_id, Server.servers_for_problem(@problem_solution.problem).map { |s| [s.name+" ("+s.address+")", s.id] }, :include_blank => false
    - else
      = f.hidden_field :server_id, :value => "#{@server.id}"

    = f.input :command, :label => "Команда" do
      - if !@server
        = f.select :command_id, Command.commands_for_problem(@problem_solution.problem).map { |s| [s.name+" ("+s.command+")", s.id] }, :include_blank => false
      - else 
        = f.select :command_id, Command.commands_for_server_and_problem(@server, @problem_solution.problem).map { |s| [s.name+" ("+s.command+")", s.id] }, :include_blank => false

    = f.input :params, :label => "Параметры", :input_html => { :class => 'form-input', :value => "#{@params}" }

  .form-actions
    = f.submit "Выполнить команду", :class => "btn"
    = link_to 'Отмена', problem_solutions_path, :class => "btn"
